<?php

use Shopgate\ClickAndReserve\Model\Config;

/** @var Shopgate\ClickAndReserve\Block\Product $this */

/** @var Shopgate\ClickAndReserve\Helper\Data $helper */
$helper = $this->helper(Shopgate\ClickAndReserve\Helper\Data::class);

if ($helper->getConfig(Config::XML_PATH_GENERAL_RENDER) === Config::RENDER_DISABLED) {
    return;
}

?>

<style type="text/css">
    .rr-wrapper {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        transform: translateY(-30px);
    }
    #rr-reserve-button {
        flex-grow: 1;
    }
    #rr-live-inventory:not(:empty) {
        flex-grow: 1;
        margin-top: 12px;
    }

    #rr-omni-reserve-button{
        width: 100%;
        line-height: 2.2rem;
    }

    #rr-omni #rr-omni-custom, #rr-omni-reserve-button {
        <?= $helper->getConfig(Config::XML_PATH_DESIGN_COLORS) ?>
    }
</style>

<div class="rr-wrapper">
    <div id="rr-reserve-button"></div>
    <div id="rr-live-inventory"></div>
</div>

<script type="text/javascript">
  require([
    'jquery',
    'domReady!'
  ], function ($) {
    $('.box-tocart').append($('.rr-wrapper'));
  });
</script>

